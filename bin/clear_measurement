#!/bin/bash
#/////////////////////////////////////////////////////////////////////////////////////
# nanohome - clear_measurement
#
# Clear a measurement from influx bucket "Measurement"
#/////////////////////////////////////////////////////////////////////////////////////

# Parameter & Variables
MEASUREMENT="$1"

# Delete measurement
if [ -n "${MEASUREMENT}" ]; then

	influx delete --bucket "${INFLUX_BUCKET_MEASUREMENTS}" \
	  --start '1970-01-01T00:00:00Z' \
	  --stop "$(date --utc +"%Y-%m-%dT%H:%M:%SZ")" \
	  --predicate "_measurement=\"${MEASUREMENT}\""

	[[ $LOG_EXEC ]] && echo -e "${LOG_SUCC} InfluxDB: Measurement \"${MEASUREMENT}\" cleared" >> /proc/1/fd/1
fi
